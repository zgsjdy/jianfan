"use strict"; const e = require("../../common/vendor.js"), t = require("../../stores/counter.js"), a = require("../../utils/getSysInf.js"), n = t.useBotNarStor(); exports.usedfScreenOnce = function () { let t = e.reactive({ animclass: "", folatdata: [], animdelay: 0, butResetY: 0, animclassimg: "moarimg" }); function r(e, t, a = 0, n = 0) { e = Math.ceil(e), t = Math.floor(t); let r, i = [], o = 0; for (; i.length < a;) { r = 0; let a = Math.floor(Math.random() * (t - e + 1)) + e; if (!i.includes(a)) { for (let e = 1; e <= n; e++)if (i.includes(a + e) || i.includes(a - e)) { r++; break } 0 === r && i.push(a) } if (o++, o > 1e3) { console.log("参数大小不够分隔后的长度要求,循环过大停止！"), i.push("参数大小不够分隔后的长度要求,循环过大停止！"); break } } return i } function i(e = 1, t, a, n = "left") { try { if ("number" != typeof e) return "参数类型错误createFolat"; let i = [], o = [...r(t[0], t[1], e, t[2])], l = [...r(a[0], a[1], e, a[2])]; for (let t = 0; t < e; t++)i.push(`top:${o[t]}%;${n}:${l[t]}%;`); return i } catch (i) { throw new Error("错误createFolat，默认null，{e}") } } t.folatdata.push(...i(7, [2, 20, 1], [1, 88, 8])), t.folatdata.push(...i(7, [23, 91, 6], [1, 23, 1], "right")), t.folatdata.push(...i(7, [23, 91, 6], [1, 23, 1])); var o = e.reactive({}); a.yun("jianfandata", "jfSystemData").then((e => { o.data = e[0].dfScreenOnce, n.QJScreenOnceimg = Object.assign(n.QJScreenOnceimg, e[0].dfScreenOnce) })); let l, c = "con", s = !0, u = !1; return { anim: t, dfimg: o, loadImgAnim: function () { t.animclass = "moareone", setTimeout((() => { t.animclass = "moarebox" }), 1510); let e = setInterval((() => { t.animdelay -= .01, t.animdelay <= -1.5 && clearInterval(e) }), 10) }, reviseMovAnim: function (e) { "touch-out-of-bounds" === e.detail.source && e.detail.y > 100 && (c = "but"), "" === e.detail.source && (c = "top", 0 === e.detail.y && (c = "con")), "touch" === e.detail.source && t.animdelay >= -2.9 && (t.animdelay -= .02), 0 != t.butResetY && (t.butResetY = 0) }, resetMov: function () { let e, a; if (t.butResetY = 1, t.animclassimg = "moarimgzhuan", l = setTimeout((() => { clearTimeout(l), t.animclassimg = "moarimg" }), 800), "but" === c && (c = "con", !u && t.animdelay >= -3 && s)) { s = !1; let r = setInterval((() => { clearTimeout(e), clearInterval(a), t.animdelay -= .01, t.animdelay <= -3 && (clearInterval(r), setTimeout((() => { t.animclass = "jemoar", setTimeout((() => { n.QJScreenOnce.dfScreen = !1, n.QJScreenOnce.botNav = !0 }), 1810) }), 50)) }), 10) } e = setTimeout((() => { "top" === c && s && (c = "con", u = !0, t.animdelay <= -1.5 && s && (a = setInterval((() => { t.animdelay += .01, t.animdelay >= -1.5 && (clearInterval(a), u = !1) }), 10))) }), 80) }, touStart: function () { clearTimeout(l), t.animclassimg = "moarimgtu" } } };
