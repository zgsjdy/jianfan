"use strict";const e=require("../../common/vendor.js"),n=require("../../utils/getSysInf.js"),a=require("../../stores/counter.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uni-swipe-action-item")+e.resolveComponent("uni-swipe-action")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.js")+(()=>"../../uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t={__name:"navBar",props:{navImg:{default:"../../static/imgs/pipeizhong.png"},navText:{type:String,default:"合成"},backIcons:{default:!1},pageIndex:{type:Number,default:1}},setup(t){const o=a.useBotNarStor(),c=t,{menheight:i,statusBarHeight:r}=n.getTobBotMar("top"),{positScreen:p,botHeight:s,botSafeHeight:u}=n.getTobBotMar("bot");function l(){c.backIcons&&e.index.navigateBack()}let m=e.reactive({select:!1,selectWatch:!1,anmi:""});e.onMounted((()=>{if(-1!==c.pageIndex){let n;e.watch((()=>o.QJnavBardata),((e,a)=>{0!==o.QJnavBardata.length&&!1===m.selectWatch?(clearTimeout(n),m.select=!0,m.selectWatch=!0,m.anmi="selectionInto"):0===o.QJnavBardata.length&&(m.anmi="selectionExit",m.selectWatch=!1,n=setTimeout((()=>{m.select=!1}),800),o.analyseStyle.countDown=0,o.QJcVanmiArr[0].map(((e,n)=>{"cVanmiArr"===e&&(o.QJcVanmiArr[0][n]="cVanmiArrCancel")})),o.QJcVanmiArr[o.QJcVanmiArr.length-1].map(((e,n)=>{"cVanmiArr"===e&&(o.QJcVanmiArr[o.QJcVanmiArr.length-1][n]="cVanmiArrCancel")})),f("clos")),"蔬菜"===x?h("蔬菜"):"肉类"===x&&h("肉类"),J=Q()}),{deep:!0,immediate:!0})}}));let d=e.ref(null);function f(e="none",n){"none"===e?o.QJonpopup.map(((e,a)=>{a===n?o.QJonpopup[a].value.open("bottom"):o.QJonpopup[a].value.close()})):"clos"===e?(A.value.closeAll(),x="蔬菜",d.value.close()):"empty"===e&&(o.QJnavBardata=[],x="蔬菜")}function g(){A.value.closeAll(),x="蔬菜"}-1!==c.pageIndex&&(o.QJonpopup[c.pageIndex]=d);let v=e.reactive({cla:["boutthover",""],pi:[!1,!0],QJcape:[]});function h(e){"蔬菜"===e?(A.value.closeAll(),v.QJcape=[],v.cla[1]="",v.pi[1]=!0,v.cla[0]="boutthover",v.pi[0]=!1,0!==o.QJnavBardata.length&&o.QJnavBardata.map((e=>{"veget"===e.cVmEtype&&v.QJcape.push(e)}))):"肉类"===e&&(A.value.closeAll(),v.QJcape=[],v.cla[0]="",v.pi[0]=!0,v.cla[1]="boutthover",v.pi[1]=!1,0!==o.QJnavBardata.length&&o.QJnavBardata.map((e=>{"meat"===e.cVmEtype&&v.QJcape.push(e)})))}let J=Q();function Q(){let e=[];return o.QJnavBardata.map((n=>{"veget"===n.cVmEtype?e.unshift(n):"meat"===n.cVmEtype&&e.push(n)})),e}let V=e.reactive([{text:"删除",style:{backgroundColor:"#ff557f"}}]),x="蔬菜",A=e.ref(null);return(n,a)=>({a:e.s(`height: ${e.unref(r)}px;`),b:c.backIcons,c:e.o(l),d:e.p({type:"back",size:"30"}),e:e.t(c.navText),f:e.n(e.unref(o).goTo.animationslData[c.pageIndex]),g:c.navImg,h:e.n(e.unref(o).goTo.animationslData[c.pageIndex]),i:e.f(e.unref(J),((n,a,t)=>({a:e.s(`background-color: ${"veget"===n.cVmEtype?"#7ad07e":"#aaaaff"};`),b:"veget"===n.cVmEtype?n.id:300*n.id}))),j:e.o((e=>f("none",c.pageIndex))),k:-1!==c.pageIndex&&e.unref(m).select,l:e.n(e.unref(m).anmi),m:e.o((e=>f("empty"))),n:e.o((e=>f("clos"))),o:e.o((e=>h("蔬菜"))),p:e.n(e.unref(v).cla[0]),q:e.unref(v).pi[0],r:e.o((e=>h("肉类"))),s:e.n(e.unref(v).cla[1]),t:e.unref(v).pi[1],v:0===e.unref(v).QJcape.length,w:e.f(e.unref(v).QJcape,((n,a,t)=>({a:n.cVurl,b:e.t(n.cVname),c:e.o((e=>function(e,n,a){if("veget"===a.cVmEtype){if("删除"===e.content.text){o.QJcVanmiArr[0][n]="cVanmiArrCancel";let e=o.QJnavBardata.findIndex((e=>e.cVname===a.cVname));o.QJnavBardata.splice(e,1),x="蔬菜"}}else if("meat"===a.cVmEtype&&"删除"===e.content.text){o.QJcVanmiArr[o.QJcVanmiArr.length-1][n]="cVanmiArrCancel";let e=o.QJnavBardata.findIndex((e=>e.cVname===a.cVname));o.QJnavBardata.splice(e,1),x="肉类"}}(e,n.id-1,n)),"veget"===n.cVmEtype?300*n.id:n.id),d:"veget"===n.cVmEtype?300*n.id:n.id,e:"247ec604-3-"+t+",247ec604-2"}))),x:e.p({"right-options":e.unref(V)}),y:e.sr(A,"247ec604-2,247ec604-1",{k:"itmecloseAll"}),z:e.s(`padding-bottom: ${e.unref(s)+10}px;`),A:e.sr(d,"247ec604-1",{k:"onpopup"}),B:e.o(g),C:e.s(`height: ${e.unref(i)}px;`),D:e.n(e.unref(o).QJScreenOnce.botNavAnimClass),E:e.s(`height: ${e.unref(r)+e.unref(i)}px; opacity: ${""===e.unref(o).QJScreenOnce.botNavAnimClass?1:0};`),F:e.s(`height: ${e.unref(r)+e.unref(i)+1}px;`)})}},o=e._export_sfc(t,[["__scopeId","data-v-247ec604"]]);wx.createComponent(o);
